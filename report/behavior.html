<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Behavioral Model &mdash; mousestyles 0.1 documentation</title>
    
    <link rel="stylesheet" href="../_static/alabaster.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '0.1',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="mousestyles 0.1 documentation" href="../index.html" />
    <link rel="up" title="Project Report" href="index.html" />
    <link rel="next" title="Exploration and Path Diversity" href="path.html" />
    <link rel="prev" title="Overview" href="overview.html" />
   
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head>
  <body role="document">  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="behavioral-model">
<span id="behavior"></span><h1>Behavioral Model<a class="headerlink" href="#behavioral-model" title="Permalink to this headline">¶</a></h1>
<div class="section" id="statement-of-problem">
<h2>Statement of Problem<a class="headerlink" href="#statement-of-problem" title="Permalink to this headline">¶</a></h2>
<p>In order to differentiate mice, we need to create a detailed behavior
profile to describe:</p>
<ol class="arabic simple">
<li>how they drink, feed or move (locomotion) and</li>
<li>how they translate between active state or inactive state.</li>
</ol>
<p>We have the following key background information from the paper:</p>
<ul>
<li><dl class="first docutils">
<dt><strong>Home Cage Monitoring System(HCM)</strong> HCM cages were spatially</dt>
<dd><p class="first last">discretized into a 12 x 24 array of cells and occupancy times for
each MD were computed as the proportion of time spent within each of
the 288 cells. To determine whether animals establish a Home base,
HCM cages were spatially discretized into a 2 x 4 array of cells, and
occupancy times for each mouse day were calculated as above. In the
experiment, 56/158 animals displayed largest occupancy times in the
cell containing the niche area, which was considered to be their Home
base location.</p>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt><strong>Active and Inactive State</strong> Mice react differently during</dt>
<dd><p class="first last">Active state and Inactive states and
all behavioral record should be classified into 2 mutually exclusive
categories, Active States (ASs) and Inactive States (ISs). To
designate ISs, we examined all time intervals occurring between
movement, feeding, and drinking events while the animal was outside
the Home base. Those time intervals exceeding an IS Threshold (IST)
duration value were classified as ISs; the set of ASs was then
defined as the complement of these ISs. Equivalent mathematically,
ASs can also be defined as those intervals resulting from connecting
gaps between events outside the Home base of length at most IST; ISs
are then defined as the complement of these ASs. (<em>Active State
Organization of Spontaneous Behavior Patterns</em>, C. Hillar et al.)</p>
</dd>
</dl>
</li>
</ul>
</div>
<div class="section" id="statement-of-statistical-problems">
<h2>Statement of Statistical Problems<a class="headerlink" href="#statement-of-statistical-problems" title="Permalink to this headline">¶</a></h2>
<p>The above flowchart shows the key metrics that are required by the study
to capture the behavioral profile:</p>
<div class="figure" id="id1">
<img alt="alt tag" src="../_images/project1_behavior_profile.png" />
<p class="caption"><span class="caption-text">Behavioral Profile (image courtesy of Tecott Lab)</span></p>
</div>
<p>The main focus is 3 key states of the mice i.e. <em>Drinking</em>, <em>Feeding</em> and
<em>Locomotion</em>.</p>
<p>Each of these metrics can be seen visually in the slides referenced
below. Each metric is a tree, decomposed into two child node metrics,
whereby when the child nodes are multiplied together, they yield the
parent metric. We illustrate the relevant calculations in the case
of <strong>drinking state</strong>:</p>
<p><strong>Drinking</strong> Consumption Rate: <code class="docutils literal"><span class="pre">Total</span> <span class="pre">Drinking</span> <span class="pre">Amount/</span> <span class="pre">Total</span> <span class="pre">Time</span></code> (mg/s)</p>
<p>Active State Prob: <code class="docutils literal"><span class="pre">Active</span> <span class="pre">Time/</span> <span class="pre">Total</span> <span class="pre">Time</span></code></p>
<p><strong>Drinking</strong> Intensity: <code class="docutils literal"><span class="pre">Total</span> <span class="pre">Drinking</span> <span class="pre">Amount/</span> <span class="pre">Active</span> <span class="pre">Time</span></code> (mg/s)</p>
<blockquote>
<div><ul>
<li><p class="first"><strong>Drinking</strong> Bout Rate: <code class="docutils literal"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">Bouts/</span> <span class="pre">Active</span> <span class="pre">Time</span></code> (bouts/s)</p>
</li>
<li><dl class="first docutils">
<dt><strong>Drinking</strong> Bout Size: <code class="docutils literal"><span class="pre">Total</span> <span class="pre">Drinking</span> <span class="pre">Amount/</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">Bouts</span></code> (mg/bout)</dt>
<dd><ul class="first last">
<li><p class="first"><strong>Drinking</strong> Bout Duration: <code class="docutils literal"><span class="pre">Total</span> <span class="pre">Drinking</span> <span class="pre">Time/</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">Bouts</span></code> (s/bout)</p>
</li>
<li><dl class="first docutils">
<dt><strong>Drinking</strong> Bout Intensity: <code class="docutils literal"><span class="pre">Drinking</span> <span class="pre">Amount/</span> <span class="pre">Total</span> <span class="pre">Drinking</span> <span class="pre">Time</span></code> (mg/s)</dt>
<dd><ul class="first last simple">
<li><strong>Drinking</strong> Bout Event Rate: <code class="docutils literal"><span class="pre">Number</span> <span class="pre">of</span> <span class="pre">Events/</span> <span class="pre">Total</span> <span class="pre">Drinking</span> <span class="pre">Time</span></code> (events/s)</li>
<li><strong>Drinking</strong> Event Size: <code class="docutils literal"><span class="pre">Total</span> <span class="pre">Drinking</span> <span class="pre">Amount/</span> <span class="pre">Number</span> <span class="pre">of</span> <span class="pre">Events</span></code> (mg/event)</li>
</ul>
</dd>
</dl>
</li>
</ul>
</dd>
</dl>
</li>
</ul>
</div></blockquote>
</div>
<div class="section" id="data">
<h2>Data<a class="headerlink" href="#data" title="Permalink to this headline">¶</a></h2>
<p>Our underlying functions depend on the following key data
requirements for each <strong>mouse, strain and day</strong>:</p>
<ul class="simple">
<li>Active State</li>
<li>Inactive State</li>
<li>Moving Active State</li>
<li>Moving Inactive State</li>
<li>Total Distance Travelled (meters)</li>
<li>Food Consumption (grams)</li>
<li>Water Consumption (milligrams)</li>
</ul>
<p>These data requirements are sourced via the <code class="docutils literal"><span class="pre">mousestyles</span></code> <code class="docutils literal"><span class="pre">data</span>
<span class="pre">loader</span></code> utilities.</p>
<p>The Food and Water consumption data was only provided on a daily
basis and our <code class="docutils literal"><span class="pre">behavior</span></code> utilities assume that such quantities
are uniformly consumed over the time period studied.</p>
</div>
<div class="section" id="illustrative-examples">
<h2>Illustrative Examples<a class="headerlink" href="#illustrative-examples" title="Permalink to this headline">¶</a></h2>
<p>We illustrate the use of the <code class="docutils literal"><span class="pre">behavior</span></code> utilties with a
motivating research question:</p>
<p><em>How do do the key feeding metrics compare across 2 different mice
for the entire 11 days?</em></p>
<p>In this code, we see a few important features. First, we create
behavior trees using the <code class="docutils literal"><span class="pre">compute_tree</span></code> function, and demonstrate
their pretty-printing functionality.  Then, we merge lists of trees
into one larger tree of lists, which we can then summarize or turn
into a Pandas data frame. Finally, we show how to plot the results
using <code class="docutils literal"><span class="pre">matplotlib</span></code>.</p>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="ch">#!/usr/bin/python</span>

<span class="kn">import</span> <span class="nn">mousestyles.behavior</span> <span class="kn">as</span> <span class="nn">bh</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="kn">as</span> <span class="nn">np</span>
<span class="kn">import</span> <span class="nn">pandas</span> <span class="kn">as</span> <span class="nn">pd</span>
<span class="kn">import</span> <span class="nn">matplotlib.pyplot</span> <span class="kn">as</span> <span class="nn">plt</span>

<span class="c1"># get a tree for each day for two different mice</span>
<span class="n">mouse1_trees</span> <span class="o">=</span> <span class="p">[</span><span class="n">bh</span><span class="o">.</span><span class="n">compute_tree</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)]</span>
<span class="n">mouse2_trees</span> <span class="o">=</span> <span class="p">[</span><span class="n">bh</span><span class="o">.</span><span class="n">compute_tree</span><span class="p">(</span><span class="s1">&#39;F&#39;</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="n">d</span><span class="p">)</span> <span class="k">for</span> <span class="n">d</span> <span class="ow">in</span> <span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">)]</span>
<span class="k">print</span><span class="p">(</span><span class="n">mouse1_trees</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>
<span class="k">print</span><span class="p">(</span><span class="n">mouse2_trees</span><span class="p">[</span><span class="mi">0</span><span class="p">])</span>

<span class="c1"># merge each of the trees for the two mice</span>
<span class="n">mouse1_merged</span> <span class="o">=</span> <span class="n">bh</span><span class="o">.</span><span class="n">BehaviorTree</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="o">*</span><span class="n">mouse1_trees</span><span class="p">)</span>
<span class="n">mouse2_merged</span> <span class="o">=</span> <span class="n">bh</span><span class="o">.</span><span class="n">BehaviorTree</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="o">*</span><span class="n">mouse2_trees</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">mouse1_merged</span><span class="p">)</span>
<span class="k">print</span><span class="p">(</span><span class="n">mouse2_merged</span><span class="p">)</span>

<span class="c1"># get the means for the two mice</span>
<span class="k">print</span><span class="p">(</span><span class="n">mouse1_merged</span><span class="o">.</span><span class="n">summarize</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">))</span>
<span class="k">print</span><span class="p">(</span><span class="n">mouse2_merged</span><span class="o">.</span><span class="n">summarize</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">mean</span><span class="p">))</span>

<span class="c1"># turn the tree into pandas DataFrame</span>
<span class="n">mouse1_df</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="n">mouse1_merged</span><span class="o">.</span><span class="n">contents</span><span class="p">)</span>
<span class="c1"># this gives us another way to compute summary statistics</span>
<span class="k">print</span><span class="p">(</span><span class="n">mouse1_df</span><span class="o">.</span><span class="n">describe</span><span class="p">())</span>


<span class="c1"># plot the AS Probability over time</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">11</span><span class="p">),</span>
         <span class="n">mouse1_merged</span><span class="p">[</span><span class="s1">&#39;AS Prob&#39;</span><span class="p">],</span> <span class="s1">&#39;r&#39;</span><span class="p">,</span>
         <span class="n">mouse2_merged</span><span class="p">[</span><span class="s1">&#39;AS Prob&#39;</span><span class="p">],</span> <span class="s1">&#39;g&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Mouse 1 and 2 AS prob. over time&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../report/plots/plot_behavior_example.py">Source code</a>, <a class="reference external" href="../report/plots/plot_behavior_example_00_00.png">png</a>, <a class="reference external" href="../report/plots/plot_behavior_example_00_00.hires.png">hires.png</a>, <a class="reference external" href="../report/plots/plot_behavior_example_00_00.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/plot_behavior_example_00_00.png" src="../_images/plot_behavior_example_00_00.png" />
</div>
<div class="highlight-python"><div class="highlight"><pre><span></span><span class="c1"># plot consumption vs. AS prob</span>
<span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">mouse2_merged</span><span class="p">[</span><span class="s1">&#39;AS Prob&#39;</span><span class="p">],</span>
         <span class="n">mouse2_merged</span><span class="p">[</span><span class="s1">&#39;Consumption Rate&#39;</span><span class="p">],</span> <span class="s1">&#39;go&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">title</span><span class="p">(</span><span class="s1">&#39;Mouse 2 consumption rate vs. AS prob.&#39;</span><span class="p">)</span>
<span class="n">plt</span><span class="o">.</span><span class="n">show</span><span class="p">()</span>
</pre></div>
</div>
<p>(<a class="reference external" href="../report/plots/plot_behavior_example_01_00.png">png</a>, <a class="reference external" href="../report/plots/plot_behavior_example_01_00.hires.png">hires.png</a>, <a class="reference external" href="../report/plots/plot_behavior_example_01_00.pdf">pdf</a>)</p>
<div class="figure">
<img alt="../_images/plot_behavior_example_01_00.png" src="../_images/plot_behavior_example_01_00.png" />
</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">Behavioral Model</a><ul>
<li><a class="reference internal" href="#statement-of-problem">Statement of Problem</a></li>
<li><a class="reference internal" href="#statement-of-statistical-problems">Statement of Statistical Problems</a></li>
<li><a class="reference internal" href="#data">Data</a></li>
<li><a class="reference internal" href="#illustrative-examples">Illustrative Examples</a></li>
</ul>
</li>
</ul>
<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="index.html">Project Report</a><ul>
      <li>Previous: <a href="overview.html" title="previous chapter">Overview</a></li>
      <li>Next: <a href="path.html" title="next chapter">Exploration and Path Diversity</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/report/behavior.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer">
      &copy;2016, 2016 UC Berkeley MA students.
      
      |
      Powered by <a href="http://sphinx-doc.org/">Sphinx 1.4.1</a>
      &amp; <a href="https://github.com/bitprophet/alabaster">Alabaster 0.7.7</a>
      
      |
      <a href="../_sources/report/behavior.txt"
          rel="nofollow">Page source</a>
    </div>

    

    
  </body>
</html>